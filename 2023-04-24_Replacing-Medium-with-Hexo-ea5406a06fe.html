<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Replacing Medium with Hexo</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Replacing Medium with Hexo</h1>
</header>
<section data-field="subtitle" class="p-summary">
A complete replacement for Medium with nearly zero overhead
</section>
<section data-field="body" class="e-content">
<section name="c15f" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="5090" id="5090" class="graf graf--h3 graf--leading graf--title">Replacing Medium with Hexo</h3><h4 name="e24e" id="e24e" class="graf graf--h4 graf-after--h3 graf--subtitle">A complete replacement for Medium with nearly zero overhead</h4><figure name="aa8c" id="aa8c" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="0*9zo0aBVJ9wmiZ3V3" data-width="1000" data-height="527" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*9zo0aBVJ9wmiZ3V3"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@skyreplacementpack" data-href="https://unsplash.com/@skyreplacementpack" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Sky Replacement Pack</a> on <a href="https://unsplash.com/photos/h2x1hRRvtOg" data-href="https://unsplash.com/photos/h2x1hRRvtOg" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Unsplash</a></figcaption></figure><p name="3b7f" id="3b7f" class="graf graf--p graf-after--figure">Recently I reached 1,000 followers, and it’s been a long journey, much longer than I thought ever.</p><p name="dbc7" id="dbc7" class="graf graf--p graf-after--p">Since a year half ago, I’ve been trying to post one article every Monday (except holidays), mainly about my work and studies, with the intention of getting more consistent exposure to attract more software engineers to discuss with me.</p><p name="ca79" id="ca79" class="graf graf--p graf-after--p">In this process, I found out the algorithm of the article exposure should have been drastically modified, even though the number of followers exceeded 1,000 but the number of views could be counted, and this is not even the number of reads.</p><p name="12ad" id="12ad" class="graf graf--p graf-after--p">This is not quite the same as what I wanted to achieve in the beginning, so I had the idea of building my own blog.</p><p name="0abe" id="0abe" class="graf graf--p graf-after--p">To this blog, I have several requirements.</p><ol class="postList"><li name="18c5" id="18c5" class="graf graf--li graf-after--p">To be easy to manage, I do not want to manage this site also need too much coding or operation overhead.</li><li name="ccbb" id="ccbb" class="graf graf--li graf-after--li">It should be easy to publish articles, the biggest advantage of Medium is it is easy to write.</li><li name="6ecf" id="6ecf" class="graf graf--li graf-after--li">Be able to render charts and Mermaid. My articles rely heavily on these visualizations, but right now Medium is completely incapable of doing anything with charts and Mermaid, so I have to cut and paste them from another place.</li><li name="0502" id="0502" class="graf graf--li graf-after--li">Be able to leave comments, this is very important, I just want to have more discussion to write articles.</li><li name="cbb3" id="cbb3" class="graf graf--li graf-after--li">To support clipboard uploading images, this feature of Medium is really convenient.</li><li name="50ed" id="50ed" class="graf graf--li graf-after--li">Be able to track hit rates and SEO, but the technical details of this are more complicated and not my top priority.</li></ol><p name="90d4" id="90d4" class="graf graf--p graf-after--li">In the end, I chose <a href="https://hexo.io/" data-href="https://hexo.io/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Hexo</a> with Github Pages as my website.</p><p name="6c3e" id="6c3e" class="graf graf--p graf-after--p">Firstly, it is quite easy to achieve this through Hexo’s built-in functions, and the generated static website is directly rendered as a Github Pages without the operation.</p><p name="1203" id="1203" class="graf graf--p graf-after--p">Secondly, after integrating <a href="https://github.com/marketplace/actions/hexo-action" data-href="https://github.com/marketplace/actions/hexo-action" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Github Action</a>, basically, after writing a Markdown file, it can be automatically published by directly pushing it to Github, which is almost the same process as writing articles on Medium.</p><p name="1300" id="1300" class="graf graf--p graf-after--p">To do the third and fourth points need to choose a good theme, I chose <a href="https://theme-next.js.org/" data-href="https://theme-next.js.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">NexT</a>.</p><p name="f5de" id="f5de" class="graf graf--p graf-after--p">For the fifth point, I used some tricks, nevertheless, I was able to do it, by using <a href="https://code.visualstudio.com/" data-href="https://code.visualstudio.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">VS Code</a> with <a href="https://marketplace.visualstudio.com/items?itemName=mushan.vscode-paste-image" data-href="https://marketplace.visualstudio.com/items?itemName=mushan.vscode-paste-image" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Paste Image</a> plugin.</p><p name="846b" id="846b" class="graf graf--p graf-after--p">This article will enable every engineer familiar with Git and open source software to build a fully functional blog in less than an hour.</p><h3 name="57e9" id="57e9" class="graf graf--h3 graf-after--p">Hexo + Hexo Action</h3><p name="fe21" id="fe21" class="graf graf--p graf-after--h3">About the basic usage of Hexo and Hexo Action here will not explain in detail, their official documentation is written completely.</p><p name="45c0" id="45c0" class="graf graf--p graf-after--p">I provide a SOP of my own, which can quickly generate a blog on Github Pages.</p><ol class="postList"><li name="5be7" id="5be7" class="graf graf--li graf-after--p">Create two repositories, one for the Hexo source code and one for the generated static website. The name of the repository for the static website must be: <code class="markup--code markup--li-code">&lt;username&gt;.github.io</code>.</li><li name="d9bb" id="d9bb" class="graf graf--li graf-after--li">Hexo’s source code repository just needs to <code class="markup--code markup--li-code">git push</code> the entire package of code after <code class="markup--code markup--li-code">hexo init blog</code>. Hexo has a sufficient <code class="markup--code markup--li-code">.gitignore</code>.</li><li name="0cc1" id="0cc1" class="graf graf--li graf-after--li">If you need to use Hexo Action, you need to run <code class="markup--code markup--li-code">npm install</code> first to generate <code class="markup--code markup--li-code">package-lock.json</code>, which will be used in the deployment process.</li><li name="93be" id="93be" class="graf graf--li graf-after--li">Generate a pair of keys for the deployment, set the private key in Hexo’s source code repository, and set the public key in the repository where the static site is located (which is still empty). For detailed process, please refer to Hexo Action’s official document.</li><li name="39e7" id="39e7" class="graf graf--li graf-after--li">Put a Github Action workflow in the Hexo source code repository, basically the example of the official Hexo Action document can be applied directly after referring to the description.</li><li name="882d" id="882d" class="graf graf--li graf-after--li">At this point, the two repositories are now connected properly, although the static site is not yet deployed. So we need to modify the Hexo config file: <code class="markup--code markup--li-code">_config.yml</code> to complete the deploy section at the bottom. For example:</li></ol><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="a10d" id="a10d" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-attr">deploy:</span><br />  <span class="hljs-attr">type:</span> <span class="hljs-string">&#x27;git&#x27;</span><br />  <span class="hljs-attr">repository:</span> <span class="hljs-string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span><br />  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span></span></pre><p name="2c16" id="2c16" class="graf graf--p graf-after--pre">After following the SOP, you should be able to see the static site Hexo has created at your URL, <code class="markup--code markup--p-code">https://&lt;username&gt;.github.io</code>.</p><h3 name="7a52" id="7a52" class="graf graf--h3 graf-after--p">NexT Theme</h3><p name="d493" id="d493" class="graf graf--p graf-after--h3">To install a new theme is simple, just find the theme’s Github and add it via <code class="markup--code markup--p-code">git submodule</code>, in this article we’ll use NexT as an example.</p><blockquote name="2124" id="2124" class="graf graf--blockquote graf-after--p"><em class="markup--em markup--blockquote-em">git submodule add </em><a href="https://github.com/next-theme/hexo-theme-next" data-href="https://github.com/next-theme/hexo-theme-next" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><em class="markup--em markup--blockquote-em">https://github.com/next-theme/hexo-theme-next</em></a><em class="markup--em markup--blockquote-em"> themes/next</em></blockquote><p name="8346" id="8346" class="graf graf--p graf-after--blockquote">That’s it.</p><p name="86d6" id="86d6" class="graf graf--p graf-after--p">If you want to develop locally, remember to pull the submodule.</p><blockquote name="2df9" id="2df9" class="graf graf--blockquote graf-after--p"><em class="markup--em markup--blockquote-em">git submodule init<br>git submodule update</em></blockquote><p name="812b" id="812b" class="graf graf--p graf-after--blockquote">Next, modify Hexo’s config file: <code class="markup--code markup--p-code">_config.yml</code>, change the default <code class="markup--code markup--p-code">theme</code> to <code class="markup--code markup--p-code">next</code>, and the theme is applied.</p><p name="8cc9" id="8cc9" class="graf graf--p graf-after--p">Then, it’s time to customize NexT.</p><p name="05ce" id="05ce" class="graf graf--p graf-after--p">Since Hexo 5.0.0, it supports the dedicated theme config, which is <code class="markup--code markup--p-code">_config.[theme].yml</code>. So we only need to copy the default NexT config file to modify it.</p><blockquote name="b91e" id="b91e" class="graf graf--blockquote graf-after--p"><em class="markup--em markup--blockquote-em">cp themes/next/_config.yml _config.next.yml</em></blockquote><p name="61e5" id="61e5" class="graf graf--p graf-after--blockquote">I only care about two functions, Mermaid and comments.</p><p name="8384" id="8384" class="graf graf--p graf-after--p">Mermaid’s settings are as follows. Just turn it on, of course, you can also modify the layout.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="9763" id="9763" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-attr">mermaid:</span><br />  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br />  <span class="hljs-comment"># Available themes: default | dark | forest | neutral</span><br />  <span class="hljs-attr">theme:</span><br />    <span class="hljs-attr">light:</span> <span class="hljs-string">default</span><br />    <span class="hljs-attr">dark:</span> <span class="hljs-string">dark</span></span></pre><p name="a67a" id="a67a" class="graf graf--p graf-after--pre">The comment function is more interesting, NexT supports many kinds of comment functions, including the popular <code class="markup--code markup--p-code">Disqus</code> and <code class="markup--code markup--p-code">Gitalk</code>.</p><p name="3e51" id="3e51" class="graf graf--p graf-after--p">But I am hosted in a public Github repository, so Disqus is directly out because Disqus requires a <strong class="markup--strong markup--p-strong">shortname</strong> setting, but if the shortname is obtained, it will directly cause the account breach. Many other comment functions also face the same security concerns.</p><p name="b46c" id="b46c" class="graf graf--p graf-after--p">Even if the Hexo source code is hosted in a private repository, as long as the static site repository used by Github Pages is public, it will still be compromised. By the way, you can pay Github to use a private repository to host Github Pages.</p><p name="6231" id="6231" class="graf graf--p graf-after--p">Therefore, the comment system needs to choose OAuth base <code class="markup--code markup--p-code">Gitalk</code> or <code class="markup--code markup--p-code">Utterances</code>, nevertheless, I don’t know why NexT needs to set Gitalk’s secret key, so Gitalk is also out.</p><p name="5b5d" id="5b5d" class="graf graf--p graf-after--p">To enable <code class="markup--code markup--p-code">Utterances</code> is simple as well, follow the <a href="https://utteranc.es/?installation_id=36599887&amp;setup_action=install" data-href="https://utteranc.es/?installation_id=36599887&amp;setup_action=install" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">official website process</a> to install the OAuth App and modify the NexT config file.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="2926" id="2926" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-attr">utterances:</span><br />  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br />  <span class="hljs-attr">repo:</span> <span class="hljs-string">&lt;installed</span> <span class="hljs-string">repo&gt;</span><br />  <span class="hljs-comment"># Available values: pathname | url | title | og:title</span><br />  <span class="hljs-attr">issue_term:</span> <span class="hljs-string">title</span><br />  <span class="hljs-comment"># Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light</span><br />  <span class="hljs-attr">theme:</span> <span class="hljs-string">github-light</span></span></pre><p name="debe" id="debe" class="graf graf--p graf-after--pre">Thus, the third and fourth requirements are completed.</p><h3 name="f3f1" id="f3f1" class="graf graf--h3 graf-after--p">Uploading pictures via clipboard</h3><p name="ff5d" id="ff5d" class="graf graf--p graf-after--h3">To meet this requirement, we must first understand how the images are processed in Hexo.</p><p name="f861" id="f861" class="graf graf--p graf-after--p">There are two options for searching for images in Hexo:</p><ol class="postList"><li name="1847" id="1847" class="graf graf--li graf-after--p">Under <code class="markup--code markup--li-code">source</code> folder.</li><li name="9ed4" id="9ed4" class="graf graf--li graf-after--li">Under the asset folder, please refer to <a href="https://hexo.io/docs/asset-folders" data-href="https://hexo.io/docs/asset-folders" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">link</a> for details.</li></ol><p name="9974" id="9974" class="graf graf--p graf-after--li">We want to use the first way, as long as there are images under source, we can read them directly using Markdown syntax.</p><blockquote name="a2ea" id="a2ea" class="graf graf--blockquote graf-after--p"><code class="markup--code markup--blockquote-code"><em class="markup--em markup--blockquote-em">![](/images/abc.jpg)</em></code></blockquote><p name="bb63" id="bb63" class="graf graf--p graf-after--blockquote">In the above example, the absolute path to the image is actually <code class="markup--code markup--p-code">&lt;projectRoot&gt;/source/images/abc.jpg</code>.</p><p name="f66a" id="f66a" class="graf graf--p graf-after--p">But we also need a helper to read the clipboard, convert the content to image files and generate the corresponding Markdown syntax.</p><p name="5fee" id="5fee" class="graf graf--p graf-after--p">VS Code has a plugin, Paste Image, that makes this easy, and it can adjust the upload location and the resulting Markdown syntax accordingly. But Hexo currently places images under the source folder, which is different from the Markdown Preview plugin I currently use (<a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced" data-href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Markdown Preview Enhanced</a>).</p><p name="8d1b" id="8d1b" class="graf graf--p graf-after--p">The preview plugin is not very compatible, so I can’t get the project directory of VS Code to match the root directory of Hexo, so my VS Code project directory can only be opened under source folder as a compromise.</p><p name="4736" id="4736" class="graf graf--p graf-after--p">This makes the Paste Image settings need to be adjusted accordingly. Here are the settings I use, at <code class="markup--code markup--p-code">&lt;projectRoot&gt;/source/.vsconde/settings.json</code>.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="2d6c" id="2d6c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">{<br />  <span class="hljs-string">&quot;pasteImage.basePath&quot;</span>: <span class="hljs-string">&quot;<span class="hljs-variable">${projectRoot}</span>&quot;</span>,<br />  <span class="hljs-string">&quot;pasteImage.path&quot;</span>: <span class="hljs-string">&quot;<span class="hljs-variable">${projectRoot}</span>/images/&quot;</span>,<br />  <span class="hljs-string">&quot;pasteImage.prefix&quot;</span>: <span class="hljs-string">&quot;/&quot;</span><br />}</span></pre><p name="80cf" id="80cf" class="graf graf--p graf-after--pre">The reason for this compromise is I need the Mermaid preview feature of Markdown Preview Enhanced. Until I find another way to do it, this compromise is a doable solution.</p><p name="39bc" id="39bc" class="graf graf--p graf-after--p">The good thing is that my writing process is not affected. When I need to publish an article, I just add a new Markdown to my VS Code project path, push it to Github after writing, and then it will be automatically deployed, so it doesn’t matter if the VS Code project path is source.</p><h3 name="1f54" id="1f54" class="graf graf--h3 graf-after--p">Conclusion</h3><p name="2d00" id="2d00" class="graf graf--p graf-after--h3">By combining these following components, it allows me to write articles in a more efficient way than Medium, and the previous pain points of having to cut and paste Mermaid and tables have disappeared.</p><ul class="postList"><li name="f8c3" id="f8c3" class="graf graf--li graf-after--p">Hexo</li><li name="55c0" id="55c0" class="graf graf--li graf-after--li">Github Action</li><li name="5020" id="5020" class="graf graf--li graf-after--li">Github Pages</li><li name="052a" id="052a" class="graf graf--li graf-after--li">NexT</li></ul><p name="148e" id="148e" class="graf graf--p graf-after--li">In addition, there is more room for customization, which is the best solution at the moment.</p><p name="d2e7" id="d2e7" class="graf graf--p graf-after--p">Currently, my audiences are divided into English and Chinese circles, and Medium’s exposure to Chinese articles is lower than English, so I will gradually adjust the posting frequency and content in the future. After that, I will adjust my posting strategy based on the tracking data I collect.</p><p name="6d48" id="6d48" class="graf graf--p graf-after--p graf--trailing">My main profession is a data architect, so this is my experiment with Medium and the blog I own.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@lazypro" class="p-author h-card">Chunting Wu</a> on <a href="https://medium.com/p/ea5406a06fe"><time class="dt-published" datetime="2023-04-24T01:43:04.509Z">April 24, 2023</time></a>.</p><p><a href="https://medium.com/@lazypro/replacing-medium-with-hexo-ea5406a06fe" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 21, 2024.</p></footer></article></body></html>