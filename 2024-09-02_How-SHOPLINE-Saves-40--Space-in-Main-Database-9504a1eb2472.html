<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How SHOPLINE Saves 40% Space in Main Database</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How SHOPLINE Saves 40% Space in Main Database</h1>
</header>
<section data-field="subtitle" class="p-summary">
Data tiering in practice: a guide to Hot and Cold data storage
</section>
<section data-field="body" class="e-content">
<section name="9345" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9b40" id="9b40" class="graf graf--h3 graf--leading graf--title">How SHOPLINE Saves 40% Space in Main¬†Database</h3><h4 name="fc44" id="fc44" class="graf graf--h4 graf-after--h3 graf--subtitle">Data tiering in practice: a guide to Hot and Cold data¬†storage</h4><figure name="6a58" id="6a58" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*jbjLT8uj_11IiL5AJX3qEA.png" data-width="4032" data-height="2268" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*jbjLT8uj_11IiL5AJX3qEA.png"><figcaption class="imageCaption">My girl</figcaption></figure><blockquote name="635e" id="635e" class="graf graf--blockquote graf-after--figure">Not a member? You can still check out this article through <a href="https://blog.stackademic.com/how-shopline-saves-40-space-in-main-database-9504a1eb2472?sk=abc84c01d531359476288429352fe4f7" data-href="https://blog.stackademic.com/how-shopline-saves-40-space-in-main-database-9504a1eb2472?sk=abc84c01d531359476288429352fe4f7" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">here</a>.</blockquote><ul class="postList"><li name="a5d7" id="a5d7" class="graf graf--li graf-after--blockquote">Part 1 (this article): <a href="https://medium.com/stackademic/how-shopline-saves-40-space-in-main-database-9504a1eb2472" data-href="https://medium.com/stackademic/how-shopline-saves-40-space-in-main-database-9504a1eb2472" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Data tiering methodology</a></li><li name="ff8e" id="ff8e" class="graf graf--li graf-after--li graf--trailing">Part 2: <a href="https://lazypro.medium.com/how-shopline-saves-40-space-in-main-database-part-2-a2c3e3420022" data-href="https://lazypro.medium.com/how-shopline-saves-40-space-in-main-database-part-2-a2c3e3420022" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Practice detail</a></li></ul></div></div></section><section name="6d9a" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="ef01" id="ef01" class="graf graf--p graf--leading">Recently, our organization has been driving a technical transformation where we are tiering data and archiving so-called ‚Äúcold data‚Äù to less costly storage.</p><p name="d644" id="d644" class="graf graf--p graf-after--p">Typically, a system must originally use a database that is both fast to access and capable of supporting complex queries, i.e. a database for OLTP scenarios. Inevitably, the unit cost of such a database must be high, which means the more data stored, the more expensive it is, and exponentially so.</p><p name="91f2" id="91f2" class="graf graf--p graf-after--p">Therefore, it is valuable to move some infrequently used data out of the original OLTP database and store it in a lower cost ‚Äúplace‚Äù. This process is called data tiering or data archiving.</p><p name="29e3" id="29e3" class="graf graf--p graf-after--p">This ‚Äúplace‚Äù is sacrificing many features for price advantages, such as poor access performance. Furthermore, the archived data may never be modified again, depending on requirements, and may only be available for viewing.</p><figure name="64b1" id="64b1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*d8mm-AkFaF7KxYbKuP_ECw.png" data-width="768" data-height="490" src="https://cdn-images-1.medium.com/max/800/1*d8mm-AkFaF7KxYbKuP_ECw.png"></figure><p name="3c47" id="3c47" class="graf graf--p graf-after--figure">The diagram above provides a clear overview.</p><p name="6ef6" id="6ef6" class="graf graf--p graf-after--p">Depending on the use case, the application may still have access to all the data, and there may be differences in usage depending on the scenario. However, at the data layer the data has actually been split into two different stores, one fast and costly, the other slow and inexpensive.</p><h3 name="b624" id="b624" class="graf graf--h3 graf-after--p">Business-driven or Tech-driven?</h3><p name="b756" id="b756" class="graf graf--p graf-after--h3">Do you feel that this organizational transformation is a tech-driven or a business-driven project?</p><p name="b553" id="b553" class="graf graf--p graf-after--p">To be honest, this would be a business-driven project. The reason is simple: the act of archiving cold data has a significant impact on the user experience.</p><p name="0699" id="0699" class="graf graf--p graf-after--p">When you‚Äôre a user of a system, let‚Äôs say a bank user, would you want to see all past transactions or just three months of transactions? Undoubtedly, I‚Äôm sure you‚Äôd want to see all of them, and they‚Äôd have to be complete, including time, recipients, amounts, and even notes.</p><p name="dde5" id="dde5" class="graf graf--p graf-after--p">Suppose your bank originally disclosed all the records of the past years, until one day, the bank realized that the cost of data storage is too high and need to archive the transaction records of three months ago, how would you feel?</p><p name="8588" id="8588" class="graf graf--p graf-after--p">Unhappy, maybe even quit, right? Yes, that‚Äôs why data archiving is a business-driven project.</p><h3 name="a372" id="a372" class="graf graf--h3 graf-after--p">What is Cold¬†Data?</h3><p name="67e6" id="67e6" class="graf graf--p graf-after--h3">So, here comes another question. How do we define cold data? I mean what data we have to archive in order to have as little impact on the user experience as possible.</p><p name="c347" id="c347" class="graf graf--p graf-after--p">To be able to answer this question, we first need to have observability.</p><ol class="postList"><li name="6c96" id="6c96" class="graf graf--li graf-after--p">the distribution of data, i.e., the volume of data as a percentage</li><li name="a4de" id="a4de" class="graf graf--li graf-after--li">the time distribution of the data</li><li name="63d3" id="63d3" class="graf graf--li graf-after--li">how users use the data</li><li name="45be" id="45be" class="graf graf--li graf-after--li">the time distribution of the data being used</li></ol><p name="7486" id="7486" class="graf graf--p graf-after--li">With these metrics we can further analyze which tables need to be tiered, and we can also identify the timing of the tiering.</p><p name="d4a0" id="d4a0" class="graf graf--p graf-after--p">I believe that the first and second points should be fairly simple, but the critical third and fourth points are almost impossible to obtain without having them built into the system in advance.</p><p name="f171" id="f171" class="graf graf--p graf-after--p">So what should we do?</p><p name="4096" id="4096" class="graf graf--p graf-after--p">Fortunately, we still have one more tactic, which is the fake door test.</p><p name="3810" id="3810" class="graf graf--p graf-after--p">Since we can‚Äôt know the context in which the user is using the data, we can make some hypotheses and verify them by making small changes to the application.</p><p name="73ed" id="73ed" class="graf graf--p graf-after--p">For example, our UI can see all bank transactions, but we want to hide transactions from six months ago. We‚Äôre not sure if six months is a good time condition, so we‚Äôll just mask the six months ago data on the UI instead of physically archiving it.</p><p name="1296" id="1296" class="graf graf--p graf-after--p">In addition to masking, we also wanted to know if this would affect the user experience, so we added a <code class="markup--code markup--p-code">Load More</code> button to record user actions. This way, we know how many users need those six-month old records, and how often they need them.</p><p name="5c7b" id="5c7b" class="graf graf--p graf-after--p">Moreover, we can take six months as a unit to evaluate how often the data from a year ago or even a year and a half ago is used, so that we can adjust the time hypothesis we set.</p><p name="d9ec" id="d9ec" class="graf graf--p graf-after--p">Eventually, we can know what is a reasonable cold data from the results of the fake door test.</p><h3 name="d247" id="d247" class="graf graf--h3 graf-after--p">How to Cold¬†Down</h3><p name="ca06" id="ca06" class="graf graf--p graf-after--h3">When we have set the scope of cold data, we then need to consider how that cold data will be accessed.</p><p name="be4c" id="be4c" class="graf graf--p graf-after--p">Once again, this is still not a purely tech-driven issue, but is actually determined by business requirements.</p><p name="66ad" id="66ad" class="graf graf--p graf-after--p">Although we all know that the low price of cold data comes at the expense of accessibility, how much impact on the user story will significantly determine our decision.</p><p name="2571" id="2571" class="graf graf--p graf-after--p">Here are a few considerations, so let‚Äôs discuss them one by one.</p><h3 name="eeaf" id="eeaf" class="graf graf--h3 graf-after--p">User scenario</h3><p name="7e91" id="7e91" class="graf graf--p graf-after--h3">Once we have clearly distinguished between hot data and cold data, is there a difference in the usage of these two types of data?</p><p name="41b8" id="41b8" class="graf graf--p graf-after--p">Usage here is not about the impact of non-functional requirements such as slow responses, but rather whether we would treat cold data and hot data in the same user scenario.</p><p name="fdcb" id="fdcb" class="graf graf--p graf-after--p">Continuing with the bank transactions example, let‚Äôs assume that transactions older than six months are considered cold.</p><p name="486d" id="486d" class="graf graf--p graf-after--p">Here are a few questions to think about.</p><ol class="postList"><li name="41ca" id="41ca" class="graf graf--li graf-after--p">Should records older than 6 months be able to be displayed seamlessly on the list page?</li><li name="18dd" id="18dd" class="graf graf--li graf-after--li">Should records older than 6 months be able to be displayed via ‚ÄúLoad More‚Äù?</li><li name="b385" id="b385" class="graf graf--li graf-after--li">Can we allow the editing of notes for transactions older than 6 months?</li><li name="b0ce" id="b0ce" class="graf graf--li graf-after--li">Can we not show records older than 6 months at all?</li></ol><p name="2e26" id="2e26" class="graf graf--p graf-after--li">From top to bottom, we have higher and higher impact on the user story, e.g. in point 3 we allow cold data to be read-only, and even more so in point 4 we allow cold data to be completely inaccessible.</p><p name="8e34" id="8e34" class="graf graf--p graf-after--p">We can know that the more forward options cost more.</p><h3 name="3cb9" id="3cb9" class="graf graf--h3 graf-after--p">Functional limitations</h3><p name="455f" id="455f" class="graf graf--p graf-after--h3">In the user scenarios, we consider whether the cold data is visible and modifiable, but this is not enough.</p><p name="4d11" id="4d11" class="graf graf--p graf-after--p">In the business logic, it is not only about the availability of the records, but also about the aggregation and other operations.</p><p name="a797" id="a797" class="graf graf--p graf-after--p">For example, the transaction records can be summed up by month to show the consumption trend, and the consumption percentage can be categorized by transaction targets. Not to mention, there are also some cross-domain data computation requirements.</p><p name="7d9d" id="7d9d" class="graf graf--p graf-after--p">If we store all the cold data in the form of csv in the object storage system, it is true that we can get a very low storage cost, but all the computing requirements must be parsed out of the whole csv, which will dramatically increase the cost of use.</p><p name="8d01" id="8d01" class="graf graf--p graf-after--p">Therefore, how to balance the cost of storage and the cost of use in terms of functionality is also an important consideration.</p><h3 name="7539" id="7539" class="graf graf--h3 graf-after--p">Existing technical stacks and data structures</h3><p name="6f26" id="6f26" class="graf graf--p graf-after--h3">Once we have reached a conclusion on the first two points, the only thing left to do is to fulfill the business requirements within the existing architecture.</p><p name="2da6" id="2da6" class="graf graf--p graf-after--p">Why is this also a critical consideration?</p><p name="6a89" id="6a89" class="graf graf--p graf-after--p">Let‚Äôs use a case study to illustrate.</p><blockquote name="77ee" id="77ee" class="graf graf--blockquote graf-after--p"><em class="markup--em markup--blockquote-em">Suppose we decide to treat half a year as a hot and cold junction, and the cold data should be able to be displayed seamlessly on the list page, but it cannot be written to, only read, and all the business logic should be the same as before.</em></blockquote><p name="76a1" id="76a1" class="graf graf--p graf-after--blockquote">Would this be a harsh condition? It depends. If we‚Äôre using Elasticsearch as our main database and defining indexes in terms of time series, then this condition is a piece of cake.</p><p name="3b68" id="3b68" class="graf graf--p graf-after--p">I‚Äôve explained <a href="https://medium.com/@lazypro/elasticsearch-index-lifecycle-management-in-a-nutshell-278072a9aab6" data-href="https://medium.com/@lazypro/elasticsearch-index-lifecycle-management-in-a-nutshell-278072a9aab6" class="markup--anchor markup--p-anchor" target="_blank">the mechanism and concepts of Elasticsearch‚Äôs Index Lifecycle Management</a>, aka ILM. Therefore, it is quite easy to fulfill such business requirements.</p><p name="9247" id="9247" class="graf graf--p graf-after--p">However, if our main database is MySQL, then it would take much more effort to accomplish the same business requirement than using Elasticsearch.</p><p name="16f5" id="16f5" class="graf graf--p graf-after--p">To sum up, how to archive cold data depends a lot on the business requirements, but also on the existing technical stack and implementation.</p><h3 name="8a8c" id="8a8c" class="graf graf--h3 graf-after--p">Common Approaches</h3><p name="25a0" id="25a0" class="graf graf--p graf-after--h3">Let‚Äôs list some common data tiering technical options and explain the scenarios where they apply using a few of the mentioned business requirements.</p><p name="5184" id="5184" class="graf graf--p graf-after--p">For the sake of simplicity, let‚Äôs summarize the requirements. Let‚Äôs start with the business requirements and focus on the following three.</p><ul class="postList"><li name="5284" id="5284" class="graf graf--li graf-after--p">Readable</li><li name="8ab7" id="8ab7" class="graf graf--li graf-after--li">Writable</li><li name="c53c" id="c53c" class="graf graf--li graf-after--li">Aggregatable</li></ul><p name="a9f6" id="a9f6" class="graf graf--p graf-after--li">In addition to the functional requirements for business, there are also non-functional requirements, so let‚Äôs focus on the three core requirements.</p><ul class="postList"><li name="fde5" id="fde5" class="graf graf--li graf-after--p">Storage Cost</li><li name="5b8e" id="5b8e" class="graf graf--li graf-after--li">Computing Cost</li><li name="fc09" id="fc09" class="graf graf--li graf-after--li">Access Latency</li></ul><p name="e594" id="e594" class="graf graf--p graf-after--li">In addition, I would like to add a key non-functional requirement.</p><ul class="postList"><li name="ed53" id="ed53" class="graf graf--li graf-after--p">Implementation Complexity</li></ul><h3 name="debe" id="debe" class="graf graf--h3 graf-after--li">Native support</h3><p name="fb92" id="fb92" class="graf graf--p graf-after--h3">As mentioned in the previous section, when using Elasticsearch‚Äôs ILM, there is a simple data tiering architecture when dealing with time-series data.</p><figure name="0070" id="0070" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*EAYVUoeLkfGljRrmHhsoOg.png" data-width="630" data-height="544" src="https://cdn-images-1.medium.com/max/800/1*EAYVUoeLkfGljRrmHhsoOg.png"><figcaption class="imageCaption">Elasticsearch ILM</figcaption></figure><ul class="postList"><li name="eee9" id="eee9" class="graf graf--li graf-after--figure">Readable (v)</li><li name="c1c7" id="c1c7" class="graf graf--li graf-after--li">Writable (x)</li><li name="d77b" id="d77b" class="graf graf--li graf-after--li">Aggregatable (v)</li></ul><p name="2746" id="2746" class="graf graf--p graf-after--li">With Elasticsearch‚Äôs ILM, it is possible to reduce storage costs by using nodes with poor hardware specifications as cold data nodes, even though the cost is still higher than object storage.</p><p name="e7e2" id="e7e2" class="graf graf--p graf-after--p">However, because Elasticsearch can keep indexes, query performance will normally reflect the hardware specification savings, and the worse the hardware specification, the worse the query performance will be. Fortunately, this performance loss is still much better than the performance of object storage.</p><ul class="postList"><li name="6f1f" id="6f1f" class="graf graf--li graf-after--p">Storage Cost Ôºàhigh)</li><li name="0ecc" id="0ecc" class="graf graf--li graf-after--li">Computing Cost (low)</li><li name="ee2c" id="ee2c" class="graf graf--li graf-after--li">Access Latency (low)</li><li name="b393" id="b393" class="graf graf--li graf-after--li">Implementation Complexity (low)</li></ul><p name="d69d" id="d69d" class="graf graf--p graf-after--li">In fact, if using a database with built-in lifecycle management such as Elasticsearch, then similar characteristics will be available.</p><h3 name="863e" id="863e" class="graf graf--h3 graf-after--p">Application sharding</h3><p name="f3cc" id="f3cc" class="graf graf--p graf-after--h3">It is because of Elasticsearch‚Äôs built-in ILM that data tiering can be achieved with little or no modification to the application‚Äôs implementation. However, applications that do not use Elasticsearch as their main database are not so lucky, and they have to implement their own sharding logic in the application.</p><p name="04b7" id="04b7" class="graf graf--p graf-after--p">The first step is to prepare two homogeneous databases, one with a high specification for hot data and the other with a low specification.</p><figure name="bc23" id="bc23" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*tYlyXEYdAatvrcADnlLDjg.png" data-width="532" data-height="492" src="https://cdn-images-1.medium.com/max/800/1*tYlyXEYdAatvrcADnlLDjg.png"></figure><p name="1062" id="1062" class="graf graf--p graf-after--figure">The application determines which database to obtain data from based on the query criteria, and if necessary, it must also do the hot data and cold data join.</p><p name="b8e1" id="b8e1" class="graf graf--p graf-after--p">The creation of cold data is usually handled by a background Extract-Transform-Load (ETL) process.</p><ul class="postList"><li name="c666" id="c666" class="graf graf--li graf-after--p">Readable (v)</li><li name="1754" id="1754" class="graf graf--li graf-after--li">Writable (v)</li><li name="935f" id="935f" class="graf graf--li graf-after--li">Aggregatable (v)</li></ul><p name="64b6" id="64b6" class="graf graf--p graf-after--li">Since there are two homogeneous databases, the impact of the usage scenario can be minimized and the ability to write cold data is also available.</p><ul class="postList"><li name="4207" id="4207" class="graf graf--li graf-after--p">Storage Cost Ôºàhigh)</li><li name="6b3f" id="6b3f" class="graf graf--li graf-after--li">Computing Cost (low)</li><li name="5f9f" id="5f9f" class="graf graf--li graf-after--li">Access Latency (low)</li></ul><p name="16e8" id="16e8" class="graf graf--p graf-after--li">There is a challenge to be solved in this implementation, there is a time gap between ETL and the application¬†, if this time gap is not dealt with then the user will feel the data loss. A common practice is to reserve a buffer, for example, for an application program to use <code class="markup--code markup--p-code">T</code> for hot/cold junction, so <code class="markup--code markup--p-code">T-1</code>, <code class="markup--code markup--p-code">T-2</code> will be the cold data accordingly, and vice versa.</p><p name="8096" id="8096" class="graf graf--p graf-after--p">In order to avoid the time gap, ETL will prepare the data of <code class="markup--code markup--p-code">T</code> at <code class="markup--code markup--p-code">T-1</code> in advance at the launch time. Nevertheless, if the data for the <code class="markup--code markup--p-code">T</code> time period is updated then it is possible to encounter data inconsistencies, which require additional handling.</p><ul class="postList"><li name="1a76" id="1a76" class="graf graf--li graf-after--p">Implementation Complexity (medium)</li></ul><h3 name="321b" id="321b" class="graf graf--h3 graf-after--li">Cold data archiving</h3><p name="4ff2" id="4ff2" class="graf graf--p graf-after--h3">The solutions mentioned above are all big technical compromises to minimize business impact, and there is no way to significantly reduce the cost of implementing data tiering in this way.</p><p name="39dc" id="39dc" class="graf graf--p graf-after--p">If we are willing to sacrifice most of the user stories, can we optimize the cost greatly? Yes, absolutely.</p><figure name="7af0" id="7af0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*wDfAZp6RpN2I6By734n8fA.png" data-width="516" data-height="748" src="https://cdn-images-1.medium.com/max/800/1*wDfAZp6RpN2I6By734n8fA.png"></figure><p name="faa4" id="faa4" class="graf graf--p graf-after--figure">The architecture is also two storage, but one is a database and the other is an object storage system. When we decide the conditions of the cold data, we can start the archiving.</p><p name="5013" id="5013" class="graf graf--p graf-after--p">Because of the characteristics of object storage, no schema, no index and long access latency, cold data is not a useful option for applications. For applications, cold data is like disappearing suddenly, and the same is true for users.</p><p name="9f6f" id="9f6f" class="graf graf--p graf-after--p">This is how the bank transaction records were handled in the first place. Both the application and the user no longer have access to cold data, which is irrelevant in most usage scenarios. Once we need cold data, for example if I want to see a disputed account from a year ago, I have to go to the bank and request a data access.</p><p name="ccce" id="ccce" class="graf graf--p graf-after--p">The data still exists, it‚Äôs just no longer easily accessible.</p><ul class="postList"><li name="cfa6" id="cfa6" class="graf graf--li graf-after--p">Readable (v)</li><li name="ac02" id="ac02" class="graf graf--li graf-after--li">Writable (x)</li><li name="10bb" id="10bb" class="graf graf--li graf-after--li">Aggregatable (x)</li></ul><p name="2e93" id="2e93" class="graf graf--p graf-after--li">Some applications may keep a history export feature, but more often it‚Äôs like a bank where the data is removed right from the user interface.</p><p name="6023" id="6023" class="graf graf--p graf-after--p">But this way we get a dramatic cost optimization, because object storage is much less pricey than databases.</p><ul class="postList"><li name="15ae" id="15ae" class="graf graf--li graf-after--p">Storage Cost Ôºàlow)</li><li name="2a2f" id="2a2f" class="graf graf--li graf-after--li">Computing Cost (x)</li><li name="c459" id="c459" class="graf graf--li graf-after--li">Access Latency (high)</li></ul><p name="8214" id="8214" class="graf graf--p graf-after--li">We‚Äôve sacrificed the business requirements, and instead, we‚Äôve dramatically reduced costs. We can see that I‚Äôve put a cross in the computing cost column because we no longer need to do computing on cold data. Of course, this way we also get an optimized development cost.</p><ul class="postList"><li name="5947" id="5947" class="graf graf--li graf-after--p">Implementation Complexity (low)</li></ul><p name="e749" id="e749" class="graf graf--p graf-after--li">If such a trade-off is adopted, do not think about satisfying business requirements, as it will only be counterproductive.</p><h3 name="10a3" id="10a3" class="graf graf--h3 graf-after--p">Data warehousing</h3><p name="268a" id="268a" class="graf graf--p graf-after--h3">The solutions mentioned so far are all extreme, either highly satisfying business requirements or highly dependent on cost optimization. Is there a middle-of-the-spectrum approach?</p><p name="55c7" id="55c7" class="graf graf--p graf-after--p">Actually, data warehousing is a solution that can satisfy part of the business requirements and achieve part of the cost optimization.</p><p name="30d9" id="30d9" class="graf graf--p graf-after--p">Data warehousing is the process of putting cold data into a ‚Äúplace‚Äù that offers low storage costs and the ability to scale computing resources to provide performance when necessary.</p><p name="1780" id="1780" class="graf graf--p graf-after--p">Data warehousing services are available in various public clouds, such as AWS Redshift and GCP BigQuery; in addition, there are many vendors offering similar solutions, such as Snowflake.</p><p name="fff1" id="fff1" class="graf graf--p graf-after--p">These data warehousing services have the following characteristics.</p><ol class="postList"><li name="db5d" id="db5d" class="graf graf--li graf-after--p">Nearly unlimited and low-cost storage.</li><li name="6263" id="6263" class="graf graf--li graf-after--li">Scale to zero when not in use to save costs.</li><li name="78c4" id="78c4" class="graf graf--li graf-after--li">Ability to compute large amounts of data.</li><li name="9138" id="9138" class="graf graf--li graf-after--li">Response times are not short, at least much longer than databases.</li></ol><figure name="476d" id="476d" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*2g7P3z9wr4tirVErJlLF5g.png" data-width="418" data-height="702" src="https://cdn-images-1.medium.com/max/800/1*2g7P3z9wr4tirVErJlLF5g.png"></figure><p name="3781" id="3781" class="graf graf--p graf-after--figure">This architecture is pretty similar to simple data archiving, but the difference is that data warehousing provides the ability to perform complex operations, so it can meet some of the business requirements. Of course, everything has a price, these computing power is the cost of exchange.</p><ul class="postList"><li name="684b" id="684b" class="graf graf--li graf-after--p">Readable (v)</li><li name="adf8" id="adf8" class="graf graf--li graf-after--li">Writable (x)</li><li name="a0cd" id="a0cd" class="graf graf--li graf-after--li">Aggregatable (v)</li></ul><p name="d3f5" id="d3f5" class="graf graf--p graf-after--li">The reason why there is only a partial business requirement is limited by the latency of data warehouse responses, which may not be experienced well if it is a user-facing feature, so the user scenario needs to be designed in such a way for users to expect a long wait.</p><p name="98c0" id="98c0" class="graf graf--p graf-after--p">In addition, although the data warehouse provides the ability to write, it is not suitable for the regular writing of applications. Because of the long latency and the high cost of a single write, batch processing with archiving is often used.</p><ul class="postList"><li name="6f77" id="6f77" class="graf graf--li graf-after--p">Storage Cost Ôºàmedium)</li><li name="16f7" id="16f7" class="graf graf--li graf-after--li">Computing Cost (high)</li><li name="80af" id="80af" class="graf graf--li graf-after--li">Access Latency (medium)</li></ul><p name="0599" id="0599" class="graf graf--p graf-after--li">It is worth mentioning if the original main database is SQL based, then this transformation is not a major impact on the application, because the data warehouse has SQL support. If the data warehouse and archive are already in place, then the effort of transformation is even less.</p><p name="17a6" id="17a6" class="graf graf--p graf-after--p">However, the latency faced in obtaining data requires a reasonable process, and if the data warehouse is operated as if it were a database, then problems such as timeout may be encountered frequently. This can be mitigated by redesigning the business process.</p><ul class="postList"><li name="e8db" id="e8db" class="graf graf--li graf-after--p">Implementation Complexity (medium)</li></ul><h3 name="d5ae" id="d5ae" class="graf graf--h3 graf-after--li">Conclusion</h3><p name="6fdf" id="6fdf" class="graf graf--p graf-after--h3">In the previous section we analyzed the properties and trade-offs of different data tiering approaches, so that we can summarize them in a table and assign a rank to them.</p><figure name="fa82" id="fa82" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*kendvZgZ1Ty32KOsmNrofQ.png" data-width="1306" data-height="648" src="https://cdn-images-1.medium.com/max/800/1*kendvZgZ1Ty32KOsmNrofQ.png"></figure><p name="1b24" id="1b24" class="graf graf--p graf-after--figure"><code class="markup--code markup--p-code">[1]</code>: Data warehousing is also through object storage, but because it creates a catalog and supports selectable fields, it is generally more efficient than just object storage.<br><code class="markup--code markup--p-code">[2]</code>: This refers to the fact that the main database is SQL based, which makes it less difficult to implement because of the compromises in the user scenarios. But if the main database is not SQL based, it&#39;s a totally different story.</p><p name="fb90" id="fb90" class="graf graf--p graf-after--p">In fact, there are many variations of these four solutions, depending on the business and technical trade-offs will be adjusted in some details, but the overall concept is basically the same.</p><p name="e3c3" id="e3c3" class="graf graf--p graf-after--p">We can realize that the task of data tiering, which feels very technical-driven, is essentially business-driven. From the beginning of the user behavior research to the subsequent adjustment of business requirements, this series of trade-offs will affect the entire system experience.</p><p name="d05c" id="d05c" class="graf graf--p graf-after--p">Even so, these trade-offs still require a lot of technical selection behind the scenes, in other words, it is not only a business-driven task.</p><p name="6c52" id="6c52" class="graf graf--p graf-after--p">We all know that data tiering is important and necessary, but how to get the whole thing launch depends on a lot of communication and mutual trust between the business side and the technical side.</p><p name="6942" id="6942" class="graf graf--p graf-after--p">With the table above, I believe I can provide you with an easy-to-understand overview of how to adjust your business requirements on a case-by-case basis.</p><h3 name="bf80" id="bf80" class="graf graf--h3 graf-after--p">Stackademic üéì</h3><p name="47ac" id="47ac" class="graf graf--p graf-after--h3">Thank you for reading until the end. Before you go:</p><ul class="postList"><li name="8122" id="8122" class="graf graf--li graf-after--p">Please consider <strong class="markup--strong markup--li-strong">clapping</strong> and <strong class="markup--strong markup--li-strong">following</strong> the writer! üëè</li><li name="35fb" id="35fb" class="graf graf--li graf-after--li">Follow us <a href="https://twitter.com/stackademichq" data-href="https://twitter.com/stackademichq" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">X</strong></a> | <a href="https://www.linkedin.com/company/stackademic" data-href="https://www.linkedin.com/company/stackademic" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">LinkedIn</strong></a> | <a href="https://www.youtube.com/c/stackademic" data-href="https://www.youtube.com/c/stackademic" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">YouTube</strong></a> | <a href="https://discord.gg/in-plain-english-709094664682340443" data-href="https://discord.gg/in-plain-english-709094664682340443" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">Discord</strong></a></li><li name="924a" id="924a" class="graf graf--li graf-after--li">Visit our other platforms: <a href="https://plainenglish.io/" data-href="https://plainenglish.io/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">In Plain English</strong></a> | <a href="https://cofeed.app/" data-href="https://cofeed.app/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">CoFeed</strong></a> | <a href="https://differ.blog/" data-href="https://differ.blog/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">Differ</strong></a></li><li name="ddcf" id="ddcf" class="graf graf--li graf-after--li graf--trailing">More content at <a href="https://stackademic.com/" data-href="https://stackademic.com/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">Stackademic.com</strong></a></li></ul></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@lazypro" class="p-author h-card">Chunting Wu</a> on <a href="https://medium.com/p/9504a1eb2472"><time class="dt-published" datetime="2024-09-02T01:57:23.434Z">September 2, 2024</time></a>.</p><p><a href="https://medium.com/@lazypro/how-shopline-saves-40-space-in-main-database-9504a1eb2472" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 21, 2024.</p></footer></article></body></html>