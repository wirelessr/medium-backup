<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Turn Based Multiplayer Beer Game</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Turn Based Multiplayer Beer Game</h1>
</header>
<section data-field="subtitle" class="p-summary">
Explore supply chain strategy and systems thinking through a game
</section>
<section data-field="body" class="e-content">
<section name="d8d8" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8976" id="8976" class="graf graf--h3 graf--leading graf--title">Turn Based Multiplayer Beer Game</h3><h4 name="0ece" id="0ece" class="graf graf--h4 graf-after--h3 graf--subtitle">Explore supply chain strategy and systems thinking through a game</h4><figure name="df63" id="df63" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*Dq2j2qL9znqYIgM6SSEd6A.png" data-width="2268" data-height="1582" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Dq2j2qL9znqYIgM6SSEd6A.png"><figcaption class="imageCaption">My girl</figcaption></figure><p name="63a7" id="63a7" class="graf graf--p graf-after--figure">Since I need to organize a systems thinking workshop in the near future, I need a beer game to start it off.</p><p name="987c" id="987c" class="graf graf--p graf-after--p">The beer game itself consists of four characters: Retailer, Wholesaler, Distributor and Factory. Through the time-delay nature of the logistics to understand the system perspective, and can have a better understanding of the system boundaries.</p><p name="46a6" id="46a6" class="graf graf--p graf-after--p">As this is a few hours workshop, I want this beer game to fulfill the following features.</p><p name="c70d" id="c70d" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">It’s a multiplayer game</strong>.</p><p name="ab1c" id="ab1c" class="graf graf--p graf-after--p">The beer game itself will have many participants playing various roles in the supply chain, but I’d like to be able to have multiple supply chains competing at the same time to see who scores higher. Thus, we can learn about their system strategies at the same time.</p><p name="4918" id="4918" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The game host should be able to see everyone’s status</strong>.</p><p name="95b9" id="95b9" class="graf graf--p graf-after--p">Since there are multiple teams competing at the same time, as a host I need to be able to see how each team is progressing and scoring at the moment.</p><p name="72c6" id="72c6" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The game flow has to be simple and easy to control the pace</strong>.</p><p name="37bb" id="37bb" class="graf graf--p graf-after--p">As I said at the beginning, this is a short workshop, so I need to get everyone up to speed quickly and I need to be able to control the details of each round.</p><p name="b80b" id="b80b" class="graf graf--p graf-after--p">Moreover, a timer appears in the player’s UI at the beginning of each round, advancing the game pace by counting down.</p><p name="fafe" id="fafe" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Be able to customize the characters</strong>.</p><p name="2bb3" id="2bb3" class="graf graf--p graf-after--p">A classic beer game consists of four characters, but the more characters there are, the longer the game will be. So I’d like to adjust the game pace so that it’s better to have three characters.</p><p name="a228" id="a228" class="graf graf--p graf-after--p">After searching around, I found that neither open source projects nor projects that are already online can satisfy these requirement perfectly. So, I’d better make one myself.</p><h3 name="bcf1" id="bcf1" class="graf graf--h3 graf-after--p">Beer Game Project</h3><p name="27c6" id="27c6" class="graf graf--p graf-after--h3"><a href="https://github.com/wirelessr/beer_game" data-href="https://github.com/wirelessr/beer_game" class="markup--anchor markup--p-anchor" rel="noopener noreferrer noopener" target="_blank">https://github.com/wirelessr/beer_game</a></p><figure name="4faf" id="4faf" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*CsYJjnT7Cm16xPVk.png" data-width="800" data-height="370" src="https://cdn-images-1.medium.com/max/800/0*CsYJjnT7Cm16xPVk.png"><figcaption class="imageCaption"><em class="markup--em markup--figure-em">Host UI</em></figcaption></figure><figure name="77a2" id="77a2" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="0*ASrUEmsFYWjhGzXc.png" data-width="800" data-height="477" src="https://cdn-images-1.medium.com/max/800/0*ASrUEmsFYWjhGzXc.png"><figcaption class="imageCaption"><em class="markup--em markup--figure-em">Player UI</em></figcaption></figure><p name="420e" id="420e" class="graf graf--p graf-after--figure">The entire project is business driven developed and tested with over 90% coverage, so please feel free to use it.</p><h3 name="f7ea" id="f7ea" class="graf graf--h3 graf-after--p">Preparedness</h3><p name="75ac" id="75ac" class="graf graf--p graf-after--h3">Create a file for secrets in the project folder. You should see me copy it in the <code class="markup--code markup--p-code">Dockerfile</code>.</p><p name="6ab1" id="6ab1" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">.streamlit/secrets.toml</code></p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="ini" name="5ce2" id="5ce2" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-section">[mongo]</span><br /><span class="hljs-attr">uri</span> = <span class="hljs-string">&quot;&lt;your mongo connection&gt;&quot;</span><br /><br /><span class="hljs-section">[admin]</span><br /><span class="hljs-attr">key</span> = <span class="hljs-string">&quot;&lt;your admin key&gt;&quot;</span><br /><br /><span class="hljs-section">[player]</span><br /><span class="hljs-attr">key</span> = <span class="hljs-string">&quot;&lt;your player key&gt;&quot;</span></span></pre><p name="d50d" id="d50d" class="graf graf--p graf-after--pre">Since this project is using MongoDB, you have to fill in the link with your account password. In addition, <code class="markup--code markup--p-code">admin.key</code> and <code class="markup--code markup--p-code">player.key</code> correspond to the key fields on the UI.</p><p name="32c6" id="32c6" class="graf graf--p graf-after--p">After all, I’m uploading the app to the public cloud, so I still need a basic authentication mechanism. If you’re running locally only and find authentication troublesome, you can remove the corresponding source code.</p><h3 name="fb84" id="fb84" class="graf graf--h3 graf-after--p">Installation and Use</h3><p name="1f61" id="1f61" class="graf graf--p graf-after--h3">This project has a <code class="markup--code markup--p-code">Dockerfile</code> attached, so it can be run directly with <code class="markup--code markup--p-code">docker</code>.</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="128c" id="128c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">docker build -t beer_game .<br />docker run --<span class="hljs-built_in">rm</span> --name beer -p 8501:8501 beer_game</span></pre><p name="3f2d" id="3f2d" class="graf graf--p graf-after--pre">For development, in addition to <code class="markup--code markup--p-code">requiremnts.txt</code>, <code class="markup--code markup--p-code">requirements-test.txt</code>, which runs the unit tests, should also be installed. Then you can run all the unit tests through the <code class="markup--code markup--p-code">Makefile</code>.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="c660" id="c660" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">pip install -r requiremnts.txt<br />pip install -r requirements-test.txt<br />make <span class="hljs-built_in">test</span></span></pre><h3 name="9f28" id="9f28" class="graf graf--h3 graf-after--pre">Game Flow</h3><p name="c4d0" id="c4d0" class="graf graf--p graf-after--h3">The whole game is divided into a host mode and a participant mode, which correspond to the options in the top corner of the UI.</p><p name="a59a" id="a59a" class="graf graf--p graf-after--p">The host first assigns a <code class="markup--code markup--p-code">game_id</code> to create the game, and all participants have to fill in the <code class="markup--code markup--p-code">player_game</code> with this id.</p><p name="26a7" id="26a7" class="graf graf--p graf-after--p">All players on the same supply chain need to use the same <code class="markup--code markup--p-code">player_id</code>, so this id is also known as the supply chain ID, and participants with the same <code class="markup--code markup--p-code">player_id</code> are separated into roles by <code class="markup--code markup--p-code">player_role</code>.</p><p name="e3f7" id="e3f7" class="graf graf--p graf-after--p">You can see the status on the host’s screen when a participant joins.</p><figure name="1208" id="1208" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*Zb8DWYqcsKYZ2OE0.png" data-width="308" data-height="324" src="https://cdn-images-1.medium.com/max/800/0*Zb8DWYqcsKYZ2OE0.png"></figure><p name="c39b" id="c39b" class="graf graf--p graf-after--figure">Let’s look at what a full iteration would look like from the host’s point of view.</p><figure name="d6d3" id="d6d3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*4pgEt7p5Pw6QD5WP.png" data-width="800" data-height="384" src="https://cdn-images-1.medium.com/max/800/0*4pgEt7p5Pw6QD5WP.png"></figure><p name="dce4" id="dce4" class="graf graf--p graf-after--figure">All the components that need to be manipulated are in this picture, and each turn starts by pressing the <code class="markup--code markup--p-code">Refresh</code> button and ends by pressing <code class="markup--code markup--p-code">Next Week</code>.</p><p name="7eac" id="7eac" class="graf graf--p graf-after--p">As for how many orders to send to all the supply chains in this round, they will be triggered by <code class="markup--code markup--p-code">Place Order</code>.</p><p name="ad6c" id="ad6c" class="graf graf--p graf-after--p">It’s worth mentioning that the <code class="markup--code markup--p-code">Place Order</code> itself is idempotent, so it&#39;s fine to change the number and press it again, the last number will be used. The <code class="markup--code markup--p-code">Place Order</code> of each participant&#39;s interface will be idempotent as well.</p><p name="45d7" id="45d7" class="graf graf--p graf-after--p">Once the host has placed the order, the shop player can take the order.</p><figure name="e887" id="e887" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*_WH25NeLvyV0fz5x.png" data-width="800" data-height="391" src="https://cdn-images-1.medium.com/max/800/0*_WH25NeLvyV0fz5x.png"></figure><p name="ea14" id="ea14" class="graf graf--p graf-after--figure">Similarly, each role in the supply chain starts with <code class="markup--code markup--p-code">Refresh</code> and ends with <code class="markup--code markup--p-code">Place Order</code>, with the shop player taking the action followed by the retailer player, and so on.</p><p name="347a" id="347a" class="graf graf--p graf-after--p">Finally, back to the host, who can press <code class="markup--code markup--p-code">Refresh</code> again to see all the statuses for the round, and <code class="markup--code markup--p-code">Next Week</code> to end the round.</p><h3 name="2fb1" id="2fb1" class="graf graf--h3 graf-after--p">Game Detail</h3><p name="0699" id="0699" class="graf graf--p graf-after--h3">There are a couple of things actually done during <code class="markup--code markup--p-code">Refresh</code>.</p><ol class="postList"><li name="bd7f" id="bd7f" class="graf graf--li graf-after--p">it refills inventory from downstream based on orders placed four weeks ago.</li><li name="e561" id="e561" class="graf graf--li graf-after--li">it receives orders from upstream.</li><li name="7168" id="7168" class="graf graf--li graf-after--li">decides how much to sell based on what inventory it can sell.</li></ol><p name="e680" id="e680" class="graf graf--p graf-after--li">Since <code class="markup--code markup--p-code">Place Order</code> is idempotent, <code class="markup--code markup--p-code">Refresh</code> itself is idempotent too.</p><h3 name="d308" id="d308" class="graf graf--h3 graf-after--p">Future work</h3><p name="e7cd" id="e7cd" class="graf graf--p graf-after--h3">It basically meets all of my needs now, but there are some enhancements that could be made.</p><p name="aad1" id="aad1" class="graf graf--p graf-after--p">For example, although the host can see the status of all the participants, it would be helpful to have a graph to show the change of inventory and cost information over time, which would be useful for reviewing the game after it is over.</p><p name="c317" id="c317" class="graf graf--p graf-after--p">There’s also a more basic problem: the current UI has no test coverage at all, mainly because the current game flow is quite simple. Just a few clicks on the UI will cover all the UI flow, so I don’t rely so much on auto-testing. However, if there is a UI modification, it will still be a bit tedious, so it would be better to have a UI unit test.</p><p name="c548" id="c548" class="graf graf--p graf-after--p">Overall, these requirements are optimizations, but their lack does not affect the functionality.</p><p name="9450" id="9450" class="graf graf--p graf-after--p graf--trailing">If you have additional ideas, you can also just submit a pull request, contributions are welcome.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@lazypro" class="p-author h-card">Chunting Wu</a> on <a href="https://medium.com/p/bb469123cdd3"><time class="dt-published" datetime="2024-09-09T01:35:30.295Z">September 9, 2024</time></a>.</p><p><a href="https://medium.com/@lazypro/turn-based-multiplayer-beer-game-bb469123cdd3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 21, 2024.</p></footer></article></body></html>